var OrchestrationEngine;(()=>{"use strict";var __webpack_modules__={336:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=void 0;var a=r(506),i=function(){function e(e,t){this.wf=e,this.storage=t,this.taskContext=new a.TaskContext}return e.prototype.run=function(){return n(this,void 0,void 0,(function(){var e,t,r,n;return o(this,(function(o){switch(o.label){case 0:e=this.wf.start,this.saveInitial(this.wf.input),o.label=1;case 1:return e?(t=this.getTask(e),r=void 0,t.inputParameters&&(r=this.getStorage(t.inputParameters)),[4,this.executeTask(r,t)]):[3,3];case 2:return n=o.sent(),t.outputParameters&&this.saveStorage(t.outputParameters,n),e=t.next,[3,1];case 3:return[2]}}))}))},e.prototype.getTask=function(e){for(var t,r=0,n=this.wf.tasks;r<n.length;r++){var o=n[r];if(o.name===e){t=o;break}}return t},e.prototype.executeTask=function(e,t){return this.taskContext.execute(e,t)},e.prototype.getStorage=function(e){var t=this,r={};return Object.keys(e).forEach((function(n){return r[n]=t.storage.getFromRoute(e[n])})),r},e.prototype.saveInitial=function(e){this.storage.save(e)},e.prototype.saveStorage=function(e,t){this.storage.saveOnRoute(e,t)},e}();t.Engine=i},148:function(__unused_webpack_module,exports){var __awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}c((n=n.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DynamicStrategy=void 0;var DynamicStrategy=function(){function DynamicStrategy(){}return DynamicStrategy.prototype.execute=function(input,task){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){if(!task.execution)throw new Error("No ha proporcionado un script a ejecutar");return Promise.resolve(eval(""+task.execution)),[2]}))}))},DynamicStrategy}();exports.DynamicStrategy=DynamicStrategy},763:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}c((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FinishStrategy=void 0;var o=function(){function e(){}return e.prototype.execute=function(e,t){return r(this,void 0,void 0,(function(){var r;return n(this,(function(n){return t.finishType&&"REDIRECT"===t.finishType.trim().toUpperCase()&&t.redirect&&t.redirect.trim().length>6&&(r=t.redirect.trim(),e&&Object.keys(e).forEach((function(t){return r.replace("{"+t+"}",e[t])})),window.location.href=r),console.log("Finish workflow!!!"),Promise.resolve("finished workflow!!!"),[2]}))}))},e}();t.FinishStrategy=o},564:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpStrategy=void 0;var a=r(750),i=function(){function e(){}return e.prototype.execute=function(e,t){return n(this,void 0,void 0,(function(){var r,n,i,u,c,l,s,f;return o(this,(function(o){if("get"!==(r=t.method.trim().toLowerCase())&&"post"!==r)throw new Error("Aún no tenemos una implementación para este metodo: "+t.method);if((n={}).Accept="application/json",t.headers&&t.headers.length>0)for(i=0,u=t.headers;i<u.length;i++)c=u[i],n[c.key]=c.value;return l={ignoreCache:!1,headers:n,timeout:3e4},s=t.url,e&&Object.keys(e).forEach((function(t){return s=s.replace("{"+t+"}",e[t])})),f=null,"post"===r&&(f=t.payload),[2,a.request(r,s,{},f,l)]}))}))},e}();t.HttpStrategy=i},324:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}c((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleStrategy=void 0;var o=function(){function e(){}return e.prototype.execute=function(e,t){return r(this,void 0,void 0,(function(){return n(this,(function(e){return[2]}))}))},e}();t.ModuleStrategy=o},492:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}c((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SetStrategy=void 0;var o=function(){function e(){}return e.prototype.execute=function(e,t){return r(this,void 0,void 0,(function(){return n(this,(function(e){if(!t.parameter)throw new Error("No ha proporcionado el parametro a asignar");if(!t.value)throw new Error("No ha proporcionado el valor a asignar");return t.outputParameters=t.parameter,Promise.resolve(t.value),[2]}))}))},e}();t.SetStrategy=o},904:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TASK_VALIDATION=void 0,t.TASK_VALIDATION=[{key:"HTTP",value:[{name:"name",required:!0,default:"",error:"No ha proporcionado el nombre de la tarea"},{name:"method",required:!0,default:"",error:"No ha proporcionado el metodo HTTP"},{name:"url",required:!0,default:"",error:"No ha proporcionado la uri HTTP"},{name:"next",required:!0,default:"",error:"No ha proporcionado el siguiente paso"}]},{key:"EXECUTION_MODULE",value:[{name:"name",required:!0,default:"",error:"No ha proporcionado el nombre de la tarea"},{name:"nameExecutionModule",required:!0,default:"",error:"No ha proporcionado el nombre del módulo a cargar"},{name:"next",required:!0,default:"",error:"No ha proporcionado el siguiente paso"}]},{key:"SET",value:[{name:"name",required:!0,default:"",error:"No ha proporcionado el nombre de la tarea"},{name:"parameter",required:!0,default:"",error:"No ha proporcionado el parametro a asignar"},{name:"value",required:!0,default:"",error:"No ha proporcionado el valor del parametro"},{name:"next",required:!0,default:"",error:"No ha proporcionado el siguiente paso"}]},{key:"DYNAMIC",value:[{name:"name",required:!0,default:"",error:"No ha proporcionado el nombre de la tarea"},{name:"execution",required:!0,default:"",error:"No ha proporcionado lógica javascript a ejecutar"},{name:"next",required:!0,default:"",error:"No ha proporcionado el siguiente paso"}]},{key:"CHOICE",value:[{name:"name",required:!0,default:"",error:"No ha proporcionado el nombre de la tarea"},{name:"caseValueParam",required:!0,default:"",error:"No ha proporcionado el campo a evaluar en la decision"},{name:"decisionCases",required:!0,default:"",error:"No ha proporcionado las opciones de la desición"}]},{key:"CHOICE_OPTION",value:[{name:"valueOption",required:!0,default:"",error:"No ha proporcionado el valor de la opción"},{name:"next",required:!0,default:"",error:"No ha proporcionado el siguiente paso"}]},{key:"FINISH",value:[{name:"name",required:!0,default:"",error:"No ha proporcionado el nombre de la tarea"}]}]},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TaskContext=void 0;var n=r(564),o=r(324),a=r(763),i=r(492),u=r(148),c=function(){function e(){this.strategies=[{key:"HTTP",value:new n.HttpStrategy},{key:"EXECUTION_MODULE",value:new o.ModuleStrategy},{key:"SET",value:new i.SetStrategy},{key:"DYNAMIC",value:new u.DynamicStrategy},{key:"FINISH",value:new a.FinishStrategy}]}return e.prototype.execute=function(e,t){return this.getStrategy(t.type).execute(e,t)},e.prototype.getStrategy=function(e){for(var t,r=0,n=this.strategies;r<n.length;r++){var o=n[r];if(o.key===e){t=o.value;break}}return t},e}();t.TaskContext=c},293:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;var n=r(904);function o(e){return null==e}function a(e){for(var t,r=0,a=n.TASK_VALIDATION;r<a.length;r++){var i=a[r];if(e.type===i.key){t=i;break}}if(o(t))throw new Error("Para la tarea "+e.name+" no ha proporcionado un tipo valido");for(var u=0,c=t.value;u<c.length;u++){var l=c[u];if(o(e[l.name]))throw new Error("Para la tarea "+e.name+" no ha proporcionado el campo requerido "+l.name)}}t.validate=function(e){if(o(e.id)||""===e.id.trim())throw new Error("No ha proporcionado el id del workflow");if(o(e.name)||""===e.name.trim())throw new Error("No ha proporcionado el nombre del workflow");if(o(e.tasks)||0===e.tasks.length)throw new Error("No ha proporcionado tareas al workflow");for(var t=0,r=e.tasks;t<r.length;t++)if(o((u=r[t]).type)||""===u.type.trim())throw new Error("Para la tarea "+u.name+" no ha proporcionado el tipo");for(var n=0,i=e.tasks;n<i.length;n++){var u;if(a(u=i[n]),"CHOICE"===u.type){if(o(u.decisionCases)||0===u.decisionCases.length)throw new Error("Para la tarea "+u.name+" no ha proporcionado opciones de desicion");u.decisionCases.forEach((function(e){return a(e)}))}}}},607:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(519),t)},519:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.run=t.load=void 0;var n,o,a=r(293),i=r(336);t.load=function(e,t){if(null==e||""===e.trim())throw new Error("No ha proporcionado una definicion de worflow");if(null==t)throw new Error("No ha proporcionado una implementacion de almacenamiento a usar");var r=JSON.parse(e);o=t,a.validate(r),n=r},t.run=function(){console.log("WF: ",n),new i.Engine(n,o).run().then((function(e){return console.log("Finaliza WorkFlow!!!")}))}},750:(e,t)=>{function r(e,t){return void 0===t&&(t=null),{ok:!1,status:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),data:t||e.statusText,json:function(){return JSON.parse(t||e.statusText)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.request=t.DEFAULT_REQUEST_OPTIONS=void 0,t.DEFAULT_REQUEST_OPTIONS={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:3e4},t.request=function(e,n,o,a,i){void 0===o&&(o={}),void 0===a&&(a=null),void 0===i&&(i=t.DEFAULT_REQUEST_OPTIONS);var u=i.ignoreCache||t.DEFAULT_REQUEST_OPTIONS.ignoreCache,c=i.headers||t.DEFAULT_REQUEST_OPTIONS.headers,l=i.timeout||t.DEFAULT_REQUEST_OPTIONS.timeout;return new Promise((function(t,i){var s=new XMLHttpRequest;s.open(e,function(e,t){void 0===t&&(t={});var r=function(e){return void 0===e&&(e={}),Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}(t);return r?e+(-1===e.indexOf("?")?"?":"&")+r:e}(n,o)),c&&Object.keys(c).forEach((function(e){return s.setRequestHeader(e,c[e])})),u&&s.setRequestHeader("Cache-Control","no-cache"),s.timeout=l,s.onload=function(e){t(function(e){return{ok:e.status>=200&&e.status<300,status:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),data:e.responseText,json:function(){return JSON.parse(e.responseText)}}}(s))},s.onerror=function(e){t(r(s,"Failed to make request."))},s.ontimeout=function(e){t(r(s,"Request took longer than expected."))},"post"===e&&a?(s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(a))):s.send()}))}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}var __webpack_exports__=__webpack_require__(607);OrchestrationEngine=__webpack_exports__})();